name: datadog-importer-example
description: A sample manifest file demonstrating usage of the datadog-importer plugin with raw query
initialize:
  plugins:
    datadog-importer:
      path: 'https://github.com/moin-oss/datadog-importer'
      method: DatadogImporter
      config:
        raw-query: "exclude_null((rollup(sum:kubernetes.cpu.usage.total{env:prod AND service:<id> AND container_name:main AND (region:us-east-1 OR region:us-east-2 OR region:us-west-2)} by {<aggregation-tags>}.rollup(avg, 3600), 'avg', <duration>) / 1000000000) / rollup(sum:kubernetes.cpu.requests{env:prod AND service:<id> AND container_name:main AND (region:us-east-1 OR region:us-east-2 OR region:us-west-2)} by {<aggregation-tags>}.rollup(avg, 3600), 'avg', <duration>) * 100)"
        output-metric-name: cpu-utilization
        aggregation-tags: region,instance-type
        aggregation-tag-output-names: aws-region,instance-type
tree:
  children:
    my-app:
      pipeline:
        compute:
          - datadog-importer
      inputs:
        - timestamp: 2025-09-01T00:00:00.000Z
          duration: 86400
          id: my-app
